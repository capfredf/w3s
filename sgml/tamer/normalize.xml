#lang sgml/xml

<?xml version="1.0"?>

<!DOCTYPE normalize [
<!ENTITY % xml-spec-replacement-text 'INCLUDE' >
<!ENTITY % xml-spec-expansion 'INCLUDE' >

<!ENTITY d "&#xD;">
<!ENTITY a "&#xA;">
<!ENTITY da "&#xD;&#xA;">

<!ENTITY recursive1 "&recursive3;">
<!ENTITY recursive2 "&recursive1;">
<!ENTITY recursive3 "<recursive>this is a bad &recursive2; exmaple</recursive>">

<![%xml-spec-replacement-text;[
<!ENTITY % pub    "&#xc9;ditions Gallimard" >
<!ENTITY   rights "All rights reserved" >
<!ENTITY   book   "La Peste: Albert Camus,
&#xA9; 1947 %pub;. &rights;" >

<!ENTITY example "<p>An ampersand (&#38;#38;) may be escaped
numerically (&#38;#38;#38;) or with a general entity
(&amp;amp;).</p>" >
]]>

<![%xml-spec-expansion;[
<!ELEMENT xml-spec-example (#PCDATA) >
<!ENTITY % xx '&#37;zz;'>
<!ENTITY % zz '&#60;!ENTITY tricky "error-prone@AT&amp;T;" >' >
%xx;
]]>
]>

<normalize id="&#xd;&#xd;A&#xa;&#xa;B&#xd;&#xa;" pe="%expansion;" recur="&recursive2;">
           <testcase>This sample shows a &tricky; method.</testcase>
           &recursive3;
           &example;
</normalize>
